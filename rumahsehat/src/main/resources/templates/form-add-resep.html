<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">
	<head>
		<title>Rumah Sehat</title>
		<link rel="stylesheet" href="styles/index.processed.css" 
				integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
				crossorigin="anonymous"/>
  		<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/css/select2.min.css" rel="stylesheet" />
		<object th:include="fragments/fragment :: css" th:remove="tag"></object>
		<object th:include="fragments/fragment :: js" th:remove="tag"></object>
	</head>
	<body>
	<nav th:replace="fragments/fragment :: navbar('Resep')"></nav>
		<div class="container">
			<div class="card m-4 p-4">
				<div class="card-body">
					<div class="justify-content-center">
						
						<h2>Buat Daftar Resep</h2>
						<br />
						<form th:action="@{/resep/add}" th:object="${resep}" method="POST">
							
							Waktu Resep Dibuat: <br />
							<input class="form-control" th:value="*{createdAt}" type="datetime-local" name="createdAt" />
							<br /><br />
							
							<table class="table">
								<thead>
								<th>Nama Obat</th>
								<th></th>
								<th><button class="btn btn-primary" name="addRow">
									Tambah Row
								</button></th>
								</thead>

								<tbody>
									<tr th:each="jml, iterationStatus: *{jumlah}">
										<td>
											<input type="hidden" th:value="${resep.id}" th:field="*{jumlah[__${iterationStatus.index}__].resep}" />
										</td>
		
										<td>
											<label> Kuantitas </label>
											<input class="form-control" style="width: 80px; margin-left:-50px;" type="number" name="kuantitas" th:field="*{jumlah[__${iterationStatus.index}__].kuantitas}"/>
										</td>

										<td>
											<br>
											<br>
											<select class="js-example-basic-single" name="namaObat" th:field="*{jumlah[__${iterationStatus.index}__].obat}">
												<div th:each="obat, iterationStatus2: ${listObatExisting}">
													<option th:value="${obat.idObat}" th:text="${obat.namaObat}"></option>
												</div>
											</select>
										</td>
	
										<td>
											<button th:value="${iterationStatus.index}" class="btn btn-danger" name="deleteRow">
												Hapus
											</button>
										</td>
									</tr>
								</tbody>
							</table>

							<button class="btn btn-primary" type="submit" name="save">Submit</button>
							<a class="btn btn-primary" href="/">Home</a>
						</form>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/js/select2.min.js"></script>
  	<script src="scripts/index.js"></script>

  	<script type="text/javascript">
   		$(document).ready(function () {
    		$('.js-example-basic-single').select2();
   		});
 	</script>
</html>
